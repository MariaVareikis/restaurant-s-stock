<!-- Modal container: Only visible if 'addForm' is truthy -->
<div class="modal" *ngIf="addForm">
  <!-- Modal content box -->
  <div class="modal-content">
    <!-- Close button: Calls onCloseModal method when clicked -->
    <span class="close" (click)="onCloseModal()">&times;</span>
    <!-- Modal title -->
    <h2>Add Product</h2>

    <!-- Form for adding a new product -->
    <form [formGroup]="addForm" (ngSubmit)="onSubmit()">
      <!-- Form group for product name -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Name</mat-label>
        <input matInput id="name" type="text" formControlName="name" />
        <mat-error *ngIf="addForm.get('name')?.invalid && addForm.get('name')?.touched">
          <span *ngIf="addForm.get('name')?.errors?.['required']">Name is required.</span>
        </mat-error>
      </mat-form-field>

      <!-- Form group for product quantity -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Quantity</mat-label>
        <input matInput id="quantity" type="number" formControlName="quantity" />
        <mat-error *ngIf="addForm.get('quantity')?.invalid && addForm.get('quantity')?.touched">
          <span *ngIf="addForm.get('quantity')?.errors?.['required']">Quantity is required.</span>
          <span *ngIf="addForm.get('quantity')?.errors?.['min']">Quantity must be at least 1.</span>
        </mat-error>
      </mat-form-field>

      <!-- Form group for product serial number -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Serial Number</mat-label>
        <input matInput id="serialNumber" type="text" formControlName="serialNumber" />
        <mat-error *ngIf="addForm.get('serialNumber')?.invalid && addForm.get('serialNumber')?.touched">
          <span *ngIf="addForm.get('serialNumber')?.errors?.['required']">Serial Number is required.</span>
        </mat-error>
      </mat-form-field>

      <!-- Form group for 'createdAt' field (display only) -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Created At</mat-label>
        <input matInput id="createdAt" type="text" [value]="addForm.get('createdAt')?.value | date: 'short'" disabled />
      </mat-form-field>

      <!-- Form group for 'updatedAt' field (display only) -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Updated At</mat-label>
        <input matInput id="updatedAt" type="text" [value]="addForm.get('updatedAt')?.value | date: 'short'" disabled />
      </mat-form-field>

      <!-- Form group for submit and cancel buttons -->
      <div class="form-group">
        <!-- Submit button: Disabled if form is invalid -->
        <button mat-raised-button color="primary" type="submit" [disabled]="addForm.invalid">Add</button>
        <!-- Cancel button: Calls onCloseModal method when clicked -->
        <button mat-raised-button color="warn" type="button" (click)="onCloseModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>